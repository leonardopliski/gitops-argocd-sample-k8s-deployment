# Argo CD - GitOps sample application deployment

These are the sample k8s application deployment settings for our argocd [sample application](https://github.com/leonardopliski/gitops-argocd-sample-k8s-application)

![Image of the argocd UI](https://i.imgur.com/r6IfZtc.png)

![Image of the argocd UI](https://i.imgur.com/D93LZ46.png)

## Installation steps

### First of all, create the argocd namespace

```
kubectl create namespace argocd
```

### Install argocd
```
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

### Access the argocd UI through kubectl port-forwarding without exposing the service
```
kubectl port-forward svc/argocd-server -n argocd 8080:443
```

### Login via the argocd CLI
The initial password is autogenerated and can be retrieved with the command:
```
kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o name | cut -d'/' -f 2
```
Login with the default username `admin` and the autogenerated `password`
```
argocd login localhost:8080
```
Feel free to change your password with:
```
argocd account update-password
```

### Create the argocd application from a git repository (feel free to fork this repo)
```
argocd app create sample-application --repo https://github.com/leonardopliski/gitops-argocd-sample-k8s-deployment.git --path . --dest-server https://kubernetes.default.svc --dest-namespace default
```

### Sync your application
```
argocd app sync sample-application
```

### Forward your service port
```
kubectl port-forward service/argocd-sample-application -n default 3000:3000
```

### Access your application
```
http://localhost:3000/
```

#### Enjoy shipping your new application versions through gitops with the deployment repository and the argocd UI

